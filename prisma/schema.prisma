generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model CategoriaGasto {
  id               Int            @id @default(autoincrement())
  nome             String         @db.VarChar(255)
  data_criacao     DateTime?      @default(now()) @db.Timestamp(0)
  data_atualizacao DateTime?      @default(now()) @db.Timestamp(0)
  data_inatividade DateTime?      @db.Timestamp(0)
  soft_delete      DateTime?      @db.Timestamp(0)
  gastosFixos      GastoFixo[]
  gastosVariados   GastoVariado[]

  @@map("categorias_gastos")
}

model CategoriaInvestimento {
  id               Int            @id @default(autoincrement())
  nome             String         @unique(map: "nome") @db.VarChar(255)
  data_criacao     DateTime?      @default(now()) @db.Timestamp(0)
  data_atualizacao DateTime?      @default(now()) @db.Timestamp(0)
  data_inatividade DateTime?      @db.Timestamp(0)
  soft_delete      DateTime?      @db.Timestamp(0)
  investimentos    Investimento[]

  @@map("categorias_investimentos")
}

model GastoFixo {
  id               Int             @id @default(autoincrement())
  descricao        String          @db.VarChar(255)
  previsto         Decimal         @db.Decimal(10, 2)
  valor            Decimal?        @db.Decimal(10, 2)
  categoria_id     Int?
  orcamento_id     Int?
  diferenca        Decimal?        @db.Decimal(10, 2)
  data_pgto        DateTime?       @db.Date
  observacoes      String?         @db.Text
  data_criacao     DateTime?       @default(now()) @db.Timestamp(0)
  data_atualizacao DateTime?       @default(now()) @db.Timestamp(0)
  data_inatividade DateTime?       @db.Timestamp(0)
  soft_delete      DateTime?       @db.Timestamp(0)
  categoriaGasto   CategoriaGasto? @relation(fields: [categoria_id], references: [id], onUpdate: NoAction, map: "gastos_fixos_ibfk_1")
  orcamento        Orcamento?      @relation(fields: [orcamento_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "gastos_fixos_ibfk_2")

  @@index([categoria_id], map: "idx_categoria_gastos")
  @@index([orcamento_id], map: "idx_orcamento_gastos_fixos")
  @@map("gastos_fixos")
}

model GastoVariado {
  id               Int             @id @default(autoincrement())
  descricao        String          @db.VarChar(255)
  valor            Decimal         @db.Decimal(10, 2)
  categoria_id     Int?
  orcamento_id     Int?
  data_pgto        DateTime?       @db.Date
  observacoes      String?         @db.Text
  data_criacao     DateTime?       @default(now()) @db.Timestamp(0)
  data_atualizacao DateTime?       @default(now()) @db.Timestamp(0)
  data_inatividade DateTime?       @db.Timestamp(0)
  soft_delete      DateTime?       @db.Timestamp(0)
  categoriaGasto   CategoriaGasto? @relation(fields: [categoria_id], references: [id], onUpdate: NoAction, map: "gastos_variados_ibfk_1")
  orcamento        Orcamento?      @relation(fields: [orcamento_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "gastos_variados_ibfk_2")

  @@index([categoria_id], map: "categoria_id")
  @@index([orcamento_id], map: "orcamento_id")
  @@map("gastos_variados")
}

model Investimento {
  id                        Int                        @id @default(autoincrement())
  nome                      String                     @db.VarChar(255)
  descricao                 String                     @db.VarChar(255)
  valor_inicial             Decimal                    @db.Decimal(10, 2)
  valor_atual               Decimal                    @db.Decimal(10, 2)
  categoria_id              Int?
  data_criacao              DateTime?                  @default(now()) @db.Timestamp(0)
  data_atualizacao          DateTime?                  @default(now()) @db.Timestamp(0)
  data_inatividade          DateTime?                  @db.Timestamp(0)
  soft_delete               DateTime?                  @db.Timestamp(0)
  categoriaInvestimento     CategoriaInvestimento?     @relation(fields: [categoria_id], references: [id], onUpdate: NoAction, map: "investimentos_ibfk_1")
  linhaDoTempoInvestimentos LinhaDoTempoInvestimento[]

  @@index([categoria_id], map: "categoria_id")
  @@map("investimentos")
}

model LinhaDoTempoInvestimento {
  id               Int           @id @default(autoincrement())
  investimento_id  Int?
  valor            Decimal       @db.Decimal(10, 2)
  data_registro    DateTime      @db.Date
  data_criacao     DateTime?     @default(now()) @db.Timestamp(0)
  data_atualizacao DateTime?     @default(now()) @db.Timestamp(0)
  data_inatividade DateTime?     @db.Timestamp(0)
  soft_delete      DateTime?     @db.Timestamp(0)
  investimento     Investimento? @relation(fields: [investimento_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "linha_do_tempo_investimentos_ibfk_1")

  @@index([investimento_id], map: "idx_investimento_linha_do_tempo")
  @@map("linha_do_tempo_investimentos")
}

model Orcamento {
  id                Int            @id @default(autoincrement())
  nome              String         @db.VarChar(255)
  valor_inicial     Decimal        @db.Decimal(10, 2)
  valor_atual       Decimal?       @db.Decimal(10, 2)
  valor_livre       Decimal?       @db.Decimal(10, 2)
  data_encerramento DateTime?      @db.Date
  data_criacao      DateTime?      @default(now()) @db.Timestamp(0)
  data_atualizacao  DateTime?      @default(now()) @db.Timestamp(0)
  data_inatividade  DateTime?      @db.Timestamp(0)
  soft_delete       DateTime?      @db.Timestamp(0)
  gastosFixos       GastoFixo[]
  gastosVariados    GastoVariado[]

  @@map("orcamentos")
}
